name = "grok-art-proxy"
main = "src/worker.ts"
compatibility_date = "2024-12-01"

# Static assets (frontend UI)
assets = { directory = "./static", binding = "ASSETS" }

# Smart placement for optimal performance
[placement]
mode = "smart"

[[d1_databases]]
binding = "DB"
database_name = "grok-imagine"
database_id = "47ac51d3-e323-4369-931d-a7fd949b6434"
migrations_dir = "migrations"

[[kv_namespaces]]
binding = "KV_CACHE"
id = "bb4133f909534054aabaf3f59b9bbf5c"

[vars]
BUILD_SHA = "dev"
KV_CACHE_MAX_BYTES = "26214400"
VIDEO_POSTER_PREVIEW = "true"
XAI_BASE_URL = "https://api.x.ai/v1"
XAI_MODELS_CACHE_TTL_MS = "300000"

# Authentication - set via Cloudflare Dashboard or wrangler secret:
#   npx wrangler secret put AUTH_USERNAME
#   npx wrangler secret put AUTH_PASSWORD
